version: "3.8"

services:
  bot:
    # 告訴 Portainer 使用當前目錄 (Git root) 的 Dockerfile 建置
    build: .
    container_name: yt_discord_bot
    restart: unless-stopped

    # 環境變數設定 (Portainer UI 可覆蓋)
    environment:
      - TOKEN=${TOKEN}
      - CLIENT_ID=${CLIENT_ID}
      - GUILD_ID=${GUILD_ID}
      - VIDEO_CHANNEL_ID=${VIDEO_CHANNEL_ID}
      - STREAM_CHANNEL_ID=${STREAM_CHANNEL_ID}
      - CRAWLER_TYPE=${CRAWLER_TYPE}
      - MONGODB_URI=${MONGODB_URI}
      - WEBHOOK_URL=${WEBHOOK_URL}

    # 若需存取主機網路 (例如連線主機上的 MongoDB)
    # extra_hosts:
    #   - "host.docker.internal:host-gateway"
